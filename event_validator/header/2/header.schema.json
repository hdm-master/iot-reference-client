{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://iot.connectprint.cloud/schemas/header/msg_header.schema.json",
    "title": "IOT message header schema",
    "description": "This is the general schema of an IOT message. Any message sent to IOT requires a standard header plus an usecase specific payload. All messages must be sent in the correct chronological order with monotonically increasing timestamps in the assettimestamp attribut.",
    "type": "object",
    "properties": {   
        "assetid":{         "type": "string",
                            "description": "ID of the asset (data producer) as registered into the Directory / UUID, _MUST_ be unique."
        },
        "assethardwareversion":{    "type": "string",
                                    "description":"Hardware version of the asset."
        },
        "assetmanufacturername":{   "type": "string",
                                    "description":"Name of the asser manufacturer."
        },
        "assetname": {      "type": "string",
                            "description": "Any asset identifying name, for debugging purposes only. Prinect: [friendlyName]"
        },   
        "assetserial":{     "type": "string",
                            "description": "Serial number of the asset, e.g. serial number if the press."
        }, 
        "assetsoftwareversion":{    "type": "string",
                                    "description":"Software version of the asset, e.g. Prinect software version."
        },
        "assetsubtype":{    "type": "string",
                            "description": "Model information to detail the given device class (see @assettype).",
                            "enum": ["Speedmaster", "Primefire", "Labelfire", "Stahlfolder", "Prinect", ""]        
        },
        "assettimestamp":{  "type": "string",
                             "format": "date-time",
                             "description": "Timestamp the message has been generated by the asset (may be different than it has been sent, but not later than!). Precision in milliseconds (if available / given from the asset), format YYYY-MM-DDTHH:MM:SS.mmm."
        },
        "assettype":{       "type": "string",
                            "description": "Describes the general class of the asset the message concerns, e.g. 'SheetfedPress'.",
                            "enum": ["DigitalPrinter", "SheetfedPress", "Cutter", "SheetFolder", "ShapeCutter", "BoxMaker", "Gatherer", "Stitcher", "AdhesiveBinder", "AdhesiveBinderLine", "Trimmer",
                                     "ThreadSewer", "CaseMaker", "BookProductionLine", "BoxPacker", "ManualPrePress", "ManualPress", "ManualPostPress", "PostPressExternal", "Workflow"]        
        },
        "eventsubtype":{    "type": "string",
                            "description": "Add. type information referring the message payload. The eventSubtype needs to be unique within the eventType. (todo: add some enumerations later here)"
        },    
        "eventtype":{       "type": "string",
                            "enum": ["prinect.xjmf", "prinect.interval", "presscenter.oda", "presscenter.cle", "generic.signal", "smoke-test"],
                            "description": "Type information referring the message payload. The eventType needs to be unique within the platform."
        },
        "headerversion":{   "type": "integer",
                            "enum": [2],
                            "description": "This relates to the current header schema / definition, must be set 1 if the message complies this schema version."
        },
        "sendertype":{      "type": "string",
                            "enum": ["prinect", "system", "press", "ctp", "postpress"],
                            "description": "Identifies the type of the controller if there is any."        
        },
        "sendereventuuid":{ "type": "string",
                            "description": "Sender generated message uuid (to detect duplicates caused by transport issues)."
        },
        "sendername": {     "type": "string",
                            "description": "Any sender identifying name, for debugging purposes only. Prinect: [Prinect Site ID].[Prinect Server Name]"
        },
        "sendersoftwareversion":{   "type": "string",
                                    "description":"Software version of the sender, e.g. Prinect software version,"
        },
        "sendertimestamp":{ "type": "string",
                            "format": "date-time",
                            "description": "Timestamp the even has been sent by the Controller. Precision in milliseconds, format YYYY-MM-DDTHH:MM:SS.mmm+ZZ "
        },
        "payloadversion":{  "type": "integer",
                            "description": "Version of the payload to manage payload modifications. Must be incremented for each payload version." 
        },
        "payload":{         "type": "object",
                            "description": "Specific payload identified by eventType.eventSubtype.payloadVersion. Dedicated schame requested."
        }
    },    
    "additionalProperties": false,
    "required": [
        "assetid",
        "assetserial",
        "assettimestamp",
        "assettype",
        "eventsubtype",
        "eventtype",
        "headerversion",
        "sendereventuuid",
        "sendertype",        
        "sendertimestamp",
        "payloadversion",      
        "payload"
    ]    
}